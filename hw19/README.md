## Homework №19
<details>
<summary> Дано: </summary>

```
https://github.com/erlong15/otus-linux/tree/network
(ветка network)

Vagrantfile с начальным  построением сети

    inetRouter
    centralRouter
    centralServer

тестировалось на virtualbox
Планируемая архитектура

построить следующую архитектуру

Сеть office1

    192.168.2.0/26 - dev
    192.168.2.64/26 - test servers
    192.168.2.128/26 - managers
    192.168.2.192/26 - office hardware

Сеть office2

    192.168.1.0/25 - dev
    192.168.1.128/26 - test servers
    192.168.1.192/26 - office hardware

Сеть central

    192.168.0.0/28 - directors
    192.168.0.32/28 - office hardware
    192.168.0.64/26 - wifi

Office1 ---\
                   -----> Central --IRouter --> internet
Office2----/

Итого должны получится следующие сервера

    inetRouter
    centralRouter
    office1Router
    office2Router
    centralServer
    office1Server
    office2Server
```
</details>

Теоретическая часть

    Найти свободные подсети
    Посчитать сколько узлов в каждой подсети, включая свободные
    Указать broadcast адрес для каждой подсети
    проверить нет ли ошибок при разбиении

Практическая часть

    Соединить офисы в сеть согласно схеме и настроить роутинг
    Все сервера и роутеры должны ходить в инет черз inetRouter
    Все сервера должны видеть друг друга
    у всех новых серверов отключить дефолт на нат (eth0), который вагрант поднимает для связи
    при нехватке сетевых интервейсов добавить по несколько адресов на интерфейс


## Теория

Сеть office1		| Subnet | Subnet ID	| Subnet Broadcast	| Usable addresses
-------------------:|-------:|--------------|-----------------|----:
dev	| 192.168.2.0/26 | 192.168.2.0 | 192.168.2.63 | 62
test servers | 192.168.2.64/26 | 192.168.2.64 | 192.168.2.127 | 62
managers | 192.168.2.128/26 | 192.168.2.128 | 192.168.2.191 | 62
office hardware | 192.168.2.192/26 | 192.168.2.192 | 192.168.2.255 | 62
				
Сеть office2		| Subnet | Subnet ID	| Subnet Broadcast	| Usable addresses				
-------------------:|-------:|--------------|-----------------|----:
dev | 192.168.1.0/25 | 192.168.1.0 | 192.168.1.127 | 126
test servers | 192.168.1.128/26 | 192.168.1.128 | 192.168.1.191 | 62
office hardware | 192.168.1.192/26 | 192.168.1.192 | 192.168.1.255 | 62
				
Сеть central		| Subnet | Subnet ID	| Subnet Broadcast	| Usable addresses				
-------------------:|-------:|--------------|-----------------|----:
directors | 192.168.0.0/28 | 192.168.0.0 | 192.168.0.15 | 14
reserved1 | 192.168.0.16/28 | 192.168.0.16 | 192.168.0.31 | 14
office hardware | 192.168.0.32/28 | 192.168.0.32 | 192.168.0.47 | 14
reserved2 | 192.168.0.48/28 | 192.168.0.48 | 192.168.0.63 | 14
wifi | 192.168.0.64/26 | 192.168.0.64 | 192.168.0.127 | 62
reserved3 | 192.168.0.128/25 | 192.168.0.128 | 192.168.0.255 | 126

В сети `central1` остаётся неиспользуемое пространство в виде трёх подсетей:
reserved1 - 192.168.0.16/28
reserved2 - 192.168.0.48/28
reserved3 - 192.168.0.128/25



Практика

Сеть | Subnet | Subnet ID	| Subnet Broadcast	| Usable addresses				
----:|-------:|-------------|-----------------|----:
link к office1 | 192.168.255.4/30 | 192.168.255.4 | 192.168.255.7 | 2
link к office2 | 192.168.255.8/30 | 192.168.255.8 | 192.168.255.11 | 2

Device | Interface Num| IP address | Netmask | Gateway | Net ID
-------|:------------:|------------|---------|:-------:|:------:
inetRouter    | 2 | 192.168.255.1 | 255.255.255.252 | - | router-net
centralRouter | 2 | 192.168.255.2 | 255.255.255.252 | 192.168.255.1	 | router-net
|           - | 3 | 192.168.0.1   | 255.255.255.240 | 	     -       | dir-net
|           - | 4 | 192.168.0.33  | 255.255.255.240 | 	     -       | hw-net
|           - | 5 | 192.168.0.65  | 255.255.255.192 | 	     -       | mgt-net
|           - | 6 | 192.168.255.5 | 255.255.255.252 | 	     -       | o1-net
|           - | 7 | 192.168.255.9 | 255.255.255.252 | 	     -       | o2-net
 office1Router | 2 | 192.168.255.6 | 255.255.255.252 | 192.168.255.5  | o1-net
|           - | 3 | 192.168.2.1	  | 255.255.255.192 |        -       | dev-1-net
|           - | 4 | 192.168.2.65  | 255.255.255.192 |        -       | tst-1-net
|           - | 5 | 192.168.2.129 | 255.255.255.192 |        -       | mng-1-net
|           - | 6 | 192.168.2.193 | 255.255.255.192 |        -       | hw-1-net 
 office2Router | 2 | 192.168.255.10 | 255.255.255.252 | 192.168.255.9 | o2-net
|           - | 3 | 192.168.1.1   | 255.255.255.128 | - | dev-2-net
|           - | 4 | 192.168.1.129 | 255.255.255.192 | - | tst-2-net
|           - | 5 | 192.168.1.193 | 255.255.255.192 | - | hw-2-net
centralServer | 2 | 192.168.0.2 | 255.255.255.240 | 192.168.0.1 | dir-net
office1Server | 2 | 192.168.2.2 | 255.255.255.192 | 192.168.2.1 | dev-1-net
office2Server | 2 | 192.168.1.2 | 255.255.255.128 | 192.168.1.1 | dev-2-net

На `centralRouter` сообщаем, за какими интерфейсами находятся подсети офисов.

    ip route del default
    ip route add default via 192.168.255.1 dev eth1
    ip route add 192.168.2.0/24 via 192.168.255.6
    ip route add 192.168.1.0/24 via 192.168.255.10




Офисы соединены в сеть согласно схеме, роутинг настроен. Доступ в сеть интернет осуществляется через inetRouter. Сервера обмениваются пакетами друг с другом.
